<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bolsa Juvenil Colombia ‚Äî Deja tu hoja de vida</title>
  <style>
    :root{
      --bg: #f7f9fc;
      --card: #ffffff;
      --accent: #0b5ed7;
      --muted: #6b7280;
      --success: #16a34a;
      --danger: #dc3545;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:linear-gradient(180deg,#f7f9fc, #eef4ff 60%);
      color:#0f172a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
    }
    header{
      background:transparent;
      padding:18px 20px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
    }
    .logo{
      width:44px;
      height:44px;
      background:linear-gradient(135deg,var(--accent),#7ab8ff);
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      color:white;
      font-weight:700;
      font-size:18px;
    }
    .container{
      max-width:1100px;
      margin: 14px auto;
      padding:18px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:18px;
    }
    @media(min-width:960px){
      .grid{ grid-template-columns: 1fr 420px; align-items:start; }
    }

    .card{
      background:var(--card);
      border-radius:12px;
      padding:18px;
      box-shadow: 0 6px 18px rgba(11,78,135,0.06);
    }
    h1{ margin:0 0 8px 0; font-size:20px; }
    p.lead{ margin:0 0 12px 0; color:var(--muted); font-size:14px; }

    form{ display:flex; flex-direction:column; gap:12px; }
    label{ font-size:13px; color:#0f172a; }
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    select,
    textarea{
      width:100%;
      padding:10px 12px;
      border-radius:8px;
      border:1px solid #e6eefc;
      background: #fbfdff;
      font-size:14px;
    }
    textarea{ min-height:110px; resize:vertical; }
    .row{ display:flex; gap:10px; }
    .row .col{ flex:1; }

    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 14px;
      border-radius:10px;
      background:var(--accent);
      color:white;
      border:0;
      cursor:pointer;
      font-weight:600;
      font-size:14px;
    }
    .btn.ghost{ background:transparent; color:var(--accent); border:1px solid rgba(11,78,135,0.12); }

    .muted{ color:var(--muted); font-size:13px; }

    .list{ display:flex; flex-direction:column; gap:10px; margin-top:8px; }
    .company{
      padding:12px;
      border-radius:10px;
      background:linear-gradient(180deg,#ffffff,#fbfcff);
      border:1px solid #eef6ff;
      display:flex;
      gap:12px;
      align-items:flex-start;
    }
    .company .info{ flex:1; }
    .badge{ font-size:12px; padding:6px 8px; border-radius:999px; background:#eef8ff; color:var(--accent); font-weight:600; }

    .small{ font-size:12px; color:var(--muted); }

    .success{ color:var(--success); font-weight:700; font-size:13px; }
    .danger{ color:var(--danger); font-weight:700; font-size:13px; }

    footer{ max-width:1100px; margin:14px auto; padding:12px 18px; color:var(--muted); font-size:13px; text-align:center; }

    /* Panel reclutador (collapsible) */
    details.recruiter{ margin-top:14px; }
    table{ width:100%; border-collapse:collapse; margin-top:12px; font-size:13px; }
    th,td{ padding:8px 6px; border-bottom:1px solid #f2f6fb; text-align:left; vertical-align:top; }
    pre{ background:#0b1220; color:#d6f5ff; padding:6px; border-radius:6px; overflow:auto; max-height:240px; }

    .file-info{ font-size:13px; color:var(--muted); display:flex; gap:8px; align-items:center; }
    .actions{ display:flex; gap:8px; flex-wrap:wrap; }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">BJ</div>
      <div>
        <div style="font-weight:700">Bolsa Juvenil Colombia</div>
        <div class="muted" style="font-size:13px">Conecta empresas con j√≥venes que buscan empleo</div>
      </div>
    </div>
    <nav class="muted" aria-label="navegaci√≥n">
      <span>Hecho para j√≥venes üá®üá¥</span>
    </nav>
  </header>

  <main class="container">
    <div style="display:flex; gap:12px; align-items:center; margin-bottom:10px;">
      <h1>Deja tu hoja de vida ‚Äî Post√∫late</h1>
      <div class="muted">Rellena tu informaci√≥n y sube tu CV en PDF</div>
    </div>

    <div class="grid">
      <section class="card" aria-labelledby="form-title">
        <h2 id="form-title" style="margin-top:0;">Formulario de postulante</h2>
        <p class="lead">J√≥venes de Colombia: completa tus datos para que las empresas te encuentren.</p>

        <form id="applicantForm" 
              action="https://formspree.io/f/meovgqbr" 
              method="POST"
              enctype="multipart/form-data"
              autocomplete="off" 
              novalidate>

          <div class="row">
            <div class="col">
              <label for="app-name">Nombre completo</label>
              <input id="app-name" type="text" placeholder="Ej: Juan P√©rez" required name="Nombre" />
            </div>
            <div class="col">
              <label for="app-age">Edad</label>
              <input id="app-age" type="text" placeholder="Ej: 22" inputmode="numeric" name="Edad" />
            </div>
          </div>

          <div class="row">
            <div class="col">
              <label for="app-email">Correo electr√≥nico</label>
              <input id="app-email" type="email" placeholder="tucorreo@mail.com" required name="Email" />
            </div>
            <div class="col">
              <label for="app-phone">Tel√©fono / celular</label>
              <input id="app-phone" type="tel" placeholder="Ej: +57 315 000 0000" name="Telefono" />
            </div>
          </div>

          <div class="row">
            <div class="col">
              <label for="app-city">Ciudad (Colombia)</label>
              <input id="app-city" type="text" placeholder="Ej: Bogot√°, Medell√≠n, Cali" name="Ciudad" />
            </div>
            <div class="col">
              <label for="app-education">Nivel de estudios</label>
              <select id="app-education" name="Nivel_Estudios">
                <option value="">-- Selecciona --</option>
                <option>Primaria</option>
                <option>Bachillerato</option>
                <option>T√©cnico</option>
                <option>Tecn√≥logo</option>
                <option>Pregrado</option>
                <option>Posgrado</option>
              </select>
            </div>
          </div>

          <label for="app-skills">Habilidades / cualidades (separa con comas)</label>
          <textarea id="app-skills" placeholder="Ej: Manejo de Excel, Comunicaci√≥n, Trabajo en equipo" name="Habilidades"></textarea>

          <label for="app-cv">Subir CV (PDF, m√°ximo 3 MB)</label>
          <input id="app-cv" type="file" accept="application/pdf" name="CV_Adjunto" />

          <div class="row" style="align-items:center;">
            <div style="flex:1">
              <button class="btn" type="submit">Enviar hoja de vida</button>
              <button id="app-clear" class="btn ghost" type="button">Limpiar formulario</button>
            </div>
            <div id="app-status" class="muted" style="text-align:right;"></div>
          </div>
        </form>
        
        <details class="recruiter">
          <summary style="cursor:pointer">Panel de reclutador (ver postulantes guardados)</summary>
          <div id="app-list" style="margin-top:10px;">
             </div>
        </details>
      </section>

      <aside class="card" aria-labelledby="companies-title">
        <h2 id="companies-title">Empresas ‚Äî Publica una b√∫squeda</h2>
        <p class="muted">Si eres empresa, publica qu√© buscas para que los j√≥venes sepan si aplicar.</p>

        <form id="companyForm" novalidate>
          <label for="comp-name">Nombre de la empresa</label>
          <input id="comp-name" type="text" placeholder="Ej: Cafeter√≠a La 70" required />

          <label for="comp-activity">¬øA qu√© se dedica?</label>
          <input id="comp-activity" type="text" placeholder="Ej: Servicios de alimentos" />

          <div class="row">
            <div class="col">
              <label for="comp-size">Cantidad de personal aprox.</label>
              <select id="comp-size">
                <option value="">-- Selecciona --</option>
                <option>1-5</option>
                <option>6-20</option>
                <option>21-50</option>
                <option>51-200</option>
                <option>200+</option>
              </select>
            </div>
            <div class="col">
              <label for="comp-city">Ciudad</label>
              <input id="comp-city" type="text" placeholder="Ej: Barranquilla" />
            </div>
          </div>

          <label for="comp-qualities">Cualidades que busca</label>
          <textarea id="comp-qualities" placeholder="Ej: Puntualidad, buena actitud, manejo de caja"></textarea>

          <div style="display:flex; gap:8px; margin-top:8px;">
            <button class="btn" id="comp-submit" type="button">Publicar empresa</button>
            <button class="btn ghost" id="comp-clear" type="button">Limpiar</button>
          </div>
        </form>

        <h3 style="margin-top:14px; margin-bottom:8px;">Empresas publicadas</h3>
        <div id="companies-list" class="list" aria-live="polite"></div>

        <details style="margin-top:10px;">
          <summary>Instrucciones r√°pidas</summary>
          <div class="muted" style="margin-top:8px;">
            - Todos los datos quedan en tu navegador (localStorage).<br/>
            - ¬°El formulario de postulantes ya env√≠a a un correo!<br/>
            - Ideal para ferias de empleo universitarias y convocatorias locales.
          </div>
        </details>
      </aside>
    </div>
  </main>

  <footer>
    Hecho con ‚ù§ para j√≥venes en Colombia ‚Äî conserva privacidad: datos guardados solo en tu navegador.
  </footer>

  <script>
    // === UTILIDADES ===
    function qs(id){ return document.getElementById(id); }
    function showMsg(el, msg, type = 'ok') {
      el.textContent = msg;
      el.className = (type === 'error') ? 'danger' : (type === 'ok') ? 'success' : 'muted';
      setTimeout(()=>{ el.textContent = ''; el.className='muted'; }, 5000);
    }
    // Escape HTML (buena pr√°ctica)
    function escapeHtml(str){
      if(!str) return '';
      return String(str).replace(/[&<>"'`=\/]/g, function(s) {
        return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','/':'&#x2F;','`':'&#x60;','=':'&#x3D;'}[s];
      });
    }

    // ===== Empresas (SIN CAMBIOS, sigue guardando local) =====
    const companiesKey = 'bolsa_companies_v1';
    function loadCompanies(){
      try{ return JSON.parse(localStorage.getItem(companiesKey) || '[]'); }catch(e){ return []; }
    }
    function saveCompanies(list){ localStorage.setItem(companiesKey, JSON.stringify(list)); }

    function renderCompanies(){
      const list = loadCompanies();
      const container = qs('companies-list');
      container.innerHTML = '';
      if(!list.length){
        container.innerHTML = '<div class="muted">No hay empresas publicadas todav√≠a.</div>'; return;
      }
      list.slice().reverse().forEach((c,idx)=>{
        const div = document.createElement('div');
        div.className = 'company';
        div.innerHTML = `
          <div style="width:46px; height:46px; border-radius:10px; background:#f0f8ff; display:flex; align-items:center; justify-content:center; font-weight:700; color:var(--accent);">
            ${(c.name||'E').charAt(0).toUpperCase()}
          </div>
          <div class="info">
            <div style="display:flex; gap:8px; align-items:center; justify-content:space-between;">
              <div style="font-weight:700">${escapeHtml(c.name || '‚Äî')}</div>
              <div class="badge">${escapeHtml(c.size || '')}</div>
            </div>
            <div class="small" style="margin-top:6px">${escapeHtml(c.activity || '‚Äî')}</div>
            <div style="margin-top:8px;" class="muted small"><strong>Cualidades:</strong> ${escapeHtml(c.qualities || 'No especificado')}</div>
            <div style="margin-top:8px;" class="small">Ciudad: ${escapeHtml(c.city || '‚Äî')}</div>
          </div>
        `;
        container.appendChild(div);
      });
    }

    qs('comp-submit').addEventListener('click', ()=>{
      const name = qs('comp-name').value.trim();
      if(!name){ showMsg(qs('app-status'), 'El nombre de la empresa es obligatorio.', 'error'); return; }
      const c = {
        name,
        activity: qs('comp-activity').value.trim(),
        size: qs('comp-size').value,
        qualities: qs('comp-qualities').value.trim(),
        city: qs('comp-city').value.trim(),
        createdAt: new Date().toISOString()
      };
      const arr = loadCompanies();
      arr.push(c);
      saveCompanies(arr);
      renderCompanies();
      qs('companyForm').reset();
      showMsg(qs('app-status'), 'Empresa publicada correctamente.');
    });

    qs('comp-clear').addEventListener('click', ()=>{ qs('companyForm').reset(); });

    
    function renderApplicants(){
       const wrap = qs('app-list');
       wrap.innerHTML = '<div class="muted">Las postulaciones ahora se env√≠an directamente a tu correo electr√≥nico a trav√©s de Formspree. Revisa tu bandeja de entrada.</div>';
    }

    qs('applicantForm').addEventListener('submit', async function(e){
      
      const name = qs('app-name').value.trim();
      const email = qs('app-email').value.trim();
      
      if(!name || !email){ 
        e.preventDefault();
        showMsg(qs('app-status'), 'Nombre y correo son obligatorios.', 'error'); 
        return; 
      }

      const fileInput = qs('app-cv');
      if(fileInput.files && fileInput.files[0]){
        const f = fileInput.files[0];
        if(f.type !== 'application/pdf'){ 
          e.preventDefault();
          showMsg(qs('app-status'), 'Solo se permiten archivos PDF.', 'error'); 
          return; 
        }
        if(f.size > 3 * 1024 * 1024){ 
          e.preventDefault(); 
          showMsg(qs('app-status'), 'El PDF no puede superar 3 MB.', 'error'); 
          return; 
        }
      }

      showMsg(qs('app-status'), 'Enviando postulaci√≥n...');
    });

    qs('app-clear').addEventListener('click', ()=>qs('applicantForm').reset());

    renderCompanies();
    renderApplicants(); 
  </script>
</body>
</html>